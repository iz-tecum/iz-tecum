<!doctype html>
<html lang="en">
<head>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Research — Iz Tecúm</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
  *{ box-sizing:border-box; }
  :root{
    --navW: 1200px;
    --w: 1280px;
    --padX: 24px;
    --padTop: 26px;
    --padBot: 90px;

    --line:#eee;
    --muted:#666;
    --muted2:#777;

    --heroH: 320px;
    --heroGap: 18px;
    --topbarH: 58px;

    --radius: 18px;

    /* scroll height for the wall area */
    --wallScrollH: calc(100vh - (var(--topbarH) + var(--heroH) + 20px));
  }

  body{
    margin:0;
    font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    color:#111;
    background:#fff;
  }

  a{ color:inherit; text-decoration:none; }
  a:hover{ text-decoration:underline; }

  /* =========================
     TOPBAR
     ========================= */
  .topbar{
    position: sticky;
    top: 0;
    z-index: 30;
    background:#fff;
    border-bottom: 1px solid var(--line);
  }
  .topbar-inner{
    max-width: var(--navW);
    margin: 0 auto;
    padding: 14px var(--padX);
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap: 16px;
  }
  .brand{
    font-weight: 700;
    letter-spacing:-0.01em;
    white-space: nowrap;
  }

  .topnav{
    display:flex;
    flex-wrap:wrap;
    gap: 10px;
    justify-content:flex-end;
  }
  .topnav a{
    display:inline-block;
    padding: 10px 14px;
    border-radius: 999px;
    text-decoration:none;
    transition: background-color .12s ease;
    color:#333;
  }
  .topnav a:hover{ background: rgba(0,0,0,.06); text-decoration:none; }
  .topnav a.active{ background: rgba(0,0,0,.08); }

  /* =========================
     HAMBURGER (PME-style)
     - Desktop: hidden (no layout change).
     - Mobile: shows 3 bars + dropdown panel.
     ========================= */
  .nav-toggle{
    display:none;
    width: 44px;
    height: 44px;
    border: 1px solid var(--line);
    background: #fff;
    border-radius: 999px;
    padding: 10px;
    cursor: pointer;
    align-items:center;
    justify-content:center;
    gap: 4px;
  }
  .nav-toggle .bar{
    display:block;
    width: 18px;
    height: 2px;
    background: #111;
    border-radius: 2px;
    transition: transform .18s ease, opacity .18s ease;
  }
  .topbar.nav-open .nav-toggle .bar:nth-child(1){
    transform: translateY(6px) rotate(45deg);
  }
  .topbar.nav-open .nav-toggle .bar:nth-child(2){
    opacity: 0;
  }
  .topbar.nav-open .nav-toggle .bar:nth-child(3){
    transform: translateY(-6px) rotate(-45deg);
  }

  /* =========================
     HERO STRIP
     ========================= */
  .hero-strip{
    width:100%;
    height: var(--heroH);
    background: #dbf2ff;
    margin: 0 0 var(--heroGap);
  }

  .container{
    max-width: var(--w);
    margin: 0 auto;
    padding: var(--padTop) var(--padX) var(--padBot);
  }

  .page-head{
    display:flex;
    align-items:flex-end;
    justify-content:space-between;
    gap: 18px;
    padding-bottom: 14px;
    margin-bottom: 18px;
    border-bottom: 4px solid var(--line);
  }
  .page-head h1{
    margin: 0;
    font-size: 28px;
    font-weight: 800;
    letter-spacing:-0.02em;
  }
  .page-head p{
    margin: 6px 0 0;
    color: var(--muted);
    font-size: 13px;
    line-height: 1.6;
    max-width: 780px;
  }
  .head-right{
    display:flex;
    gap: 10px;
    flex-wrap:wrap;
    align-items:center;
    justify-content:flex-end;
  }
  .pill{
    display:inline-block;
    padding: 10px 12px;
    border-radius: 999px;
    background: rgba(0,0,0,.05);
    color:#333;
    font-size: 13px;
    white-space: nowrap;
  }

  .layout{
    display:grid;
    grid-template-columns: 1fr 360px;
    gap: 18px;
    align-items:start;
  }

  .bubble{
    border: 1px solid var(--line);
    border-radius: var(--radius);
    background:#fff;
    padding: 16px 16px;
    margin: 0 0 18px;
  }
  .bubble h3{
    margin:0 0 10px;
    font-size: 12px;
    letter-spacing: .08em;
    text-transform: uppercase;
    color:#111;
  }
  .bubble a{
    display:block;
    margin: 8px 0 0;
    font-size: 14px;
    color:#333;
    text-decoration:none;
  }
  .bubble a:hover{ text-decoration: underline; }

  .portrait{
    width: 100%;
    aspect-ratio: 3 / 4;
    border-radius: calc(var(--radius) - 4px);
    border: 1px solid var(--line);
    background: #e5e5e5;
    margin-bottom: 12px;
  }
  .mini{
    margin:0;
    font-size: 13px;
    color: var(--muted);
    line-height: 1.7;
  }
  .mini b{ color:#111; }

  .panel{
    border: 1px solid var(--line);
    border-radius: var(--radius);
    background:#fff;
    padding: 16px 16px;
    margin: 0 0 18px;
  }
  .panel-top{
    display:flex;
    align-items:flex-end;
    justify-content:space-between;
    gap: 16px;
    margin-bottom: 14px;
  }
  .panel h2{
    margin:0;
    font-size: 16px;
    font-weight: 800;
    letter-spacing:-0.01em;
  }
  .panel .sub{
    margin: 6px 0 0;
    color: var(--muted);
    font-size: 13px;
    line-height: 1.6;
  }
  .panel-actions{
    display:flex;
    gap: 8px;
    flex-wrap:wrap;
    justify-content:flex-end;
  }
  .ghost{
    display:inline-block;
    padding: 9px 12px;
    border-radius: 999px;
    border: 1px solid var(--line);
    background:#fff;
    font-size: 13px;
    color:#333;
    cursor: default;
    white-space: nowrap;
  }
  a.ghost{ cursor:pointer; }
  a.ghost:hover{ text-decoration:none; background: rgba(0,0,0,.04); }

  /* scroll container for the wall */
  .wall-scroll{
    max-height: var(--wallScrollH);
    overflow-y: auto;
    padding-right: 10px;
    scrollbar-gutter: stable;
    scrollbar-width: thin;
    scrollbar-color: rgba(0,0,0,.35) transparent;
  }

  .wall{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    align-items:start;
  }
  .colstack{
    display:flex;
    flex-direction:column;
    gap: 18px;
  }

  .proj{
    border: 1px solid var(--line);
    border-radius: calc(var(--radius) - 4px);
    overflow:hidden;
    background:#fff;
  }

  /* thumbnail area */
  .thumb{
    width: 100%;
    aspect-ratio: 16 / 9;
    background: #e6e6e6;
    position: relative;
    overflow: hidden;
    display: grid;
    place-items: center;
  }

  /* canvas should fill the tile like an image cover */
  .thumb-canvas{
    width: 80%;
    height: 100%;
    display: block;
    object-fit: cover;
  }

  .meta{
    padding: 12px 12px 14px;
    border-top: 1px solid var(--line);
    display:flex;
    flex-direction:column;
    min-height: 190px;
  }
  .title{
    margin:0;
    font-weight: 900;
    font-size: 15px;
    letter-spacing:-0.01em;
  }
  .blurb{
    margin: 7px 0 0;
    font-size: 13px;
    color: var(--muted);
    line-height: 1.65;
    display:-webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow:hidden;
  }
  .meta-bottom{ margin-top:auto; }

  .tags{
    display:flex;
    flex-wrap:wrap;
    gap: 8px;
    margin-top: 10px;
  }
  .tag{
    display:inline-block;
    padding: 7px 10px;
    border-radius: 999px;
    background: rgba(0,0,0,.05);
    color:#333;
    font-size: 12px;
    white-space: nowrap;
  }

  details.drop{
    border-top: 1px solid var(--line);
    background:#fff;
  }
  summary.drop-sum{
    list-style:none;
    cursor:pointer;
    padding: 12px 12px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap: 12px;
    user-select:none;
    font-size: 13px;
    color:#333;
  }
  summary.drop-sum::-webkit-details-marker{ display:none; }
  summary.drop-sum::marker{ content:""; }
  summary.drop-sum .left{
    display:flex;
    align-items:center;
    gap: 10px;
    min-width: 0;
  }
  .chip{
    display:inline-block;
    padding: 7px 10px;
    border-radius: 999px;
    background: rgba(0,0,0,.05);
    font-size: 12px;
    color:#333;
    white-space: nowrap;
  }
  summary.drop-sum::after{
    content:"";
    width: 10px;
    height: 10px;
    border-right: 2px solid rgba(0,0,0,.35);
    border-bottom: 2px solid rgba(0,0,0,.35);
    transform: rotate(45deg);
    transition: transform .12s ease;
    flex: 0 0 auto;
  }
  details.drop[open] summary.drop-sum::after{
    transform: rotate(-135deg);
  }

  .pdfwrap{ padding: 0 12px 14px; }
  .pdf{
    width:100%;
    height: 520px;
    border: 1px solid var(--line);
    border-radius: 12px;
    background:#fff;
  }
  .pdf-fallback{
    margin-top: 10px;
    font-size: 13px;
    color: var(--muted);
    line-height: 1.7;
  }
  .pdf-fallback a{
    text-decoration: underline;
    text-underline-offset: 3px;
    color:#333;
  }

  .linksrow{
    display:flex;
    gap: 10px;
    flex-wrap:wrap;
    margin-top: 10px;
  }
  .linksrow a{
    font-size: 13px;
    text-decoration: underline;
    text-underline-offset: 3px;
    color:#333;
  }

  /* viz iframe wrapper */
  .portrait.viz{
    position: relative;
    overflow: hidden;
    border-radius: calc(var(--radius) - 4px);
  }
  .portrait.viz > iframe{
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    transform: scale(1.05);
    transform-origin: center center;
    border: 0;
    display: block;
  }

  footer{
    margin-top: 70px;
    font-size: 13px;
    color:#aaa;
    text-align:center;
  }

  @media (max-width: 1100px){
    .layout{ grid-template-columns: 1fr; }
    .wall-scroll{ max-height: none; overflow: visible; padding-right: 0; }
  }

  /* MOBILE: keep layout; only add dropdown nav */
  @media (max-width: 980px){
    :root{ --heroH: 220px; }

    /* hamburger visible */
    .nav-toggle{ display:inline-flex; }
    .topbar-inner{ position: relative; }

    /* nav becomes dropdown panel */
    .topnav{
      display:none; /* shown when .topbar.nav-open */
      position:absolute;
      right: var(--padX);
      top: calc(100% + 10px);
      width: min(520px, calc(100vw - 2*var(--padX)));
      background:#fff;
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 10px;
      box-shadow: 0 14px 40px rgba(0,0,0,.10);

      flex-direction: column;
      gap: 6px;
      justify-content:flex-start;
    }
    .topbar.nav-open .topnav{ display:flex; }

    .topnav a{
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
    }

    .page-head{ align-items:flex-start; flex-direction:column; }
    .head-right{ justify-content:flex-start; }
    .wall{ grid-template-columns: 1fr; }
    .pdf{ height: 420px; }
    .wall-scroll{ max-height: none; overflow: visible; padding-right: 0; }
    .meta{ min-height: 0; }
  }
</style>
</head>

<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand"><a href="../">Iz Tecúm</a></div>

      <nav class="topnav" aria-label="Primary">
        <a href="../projects/">projects</a>
        <a class="active" href="./">research</a>
        <a href="../experience/">experience</a>
        <a href="../organizations/">organizations</a>
        <a href="../awards/">awards</a>
        <a href="../media/">media</a>
        <a href="../contact/">contact</a>
      </nav>

      <!-- PME-style hamburger (mobile only via CSS) -->
      <button class="nav-toggle" type="button" aria-label="Open menu" aria-expanded="false">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>
    </div>
  </header>

  <div class="hero-strip"></div>

  <main class="container">
    <div class="page-head">
      <div>
        <h1>Research</h1>
        <p>
          Some of my selected builds, write-ups, and research notes chosen for public access. Each tile opens into the underlying PDF so the claims are auditable, not just summarized.
        </p>
      </div>
      <div class="head-right">
        <span class="pill">demonstrative</span>
      </div>
    </div>

    <div class="layout">

      <!-- MAIN -->
      <section>
        <div class="panel">
          <div class="panel-top">
            <div>
              <h2>Research Wall</h2>
              <p class="sub">Four papers listed below, each opens into a PDF.</p>
            </div>
            <div class="panel-actions">
              <a class="ghost" href="../projects/">see projects ↗</a>
            </div>
          </div>

          <div class="wall-scroll">
            <div class="wall">

              <!-- LEFT STACK: 1 then 3 -->
              <div class="colstack">

                <!-- RESEARCH 1 -->
                <article class="proj">
                  <div class="thumb pdf-thumb" data-pdf="./pdfs/research-1-draft.pdf" aria-label="Research 1 preview">
                    <canvas class="thumb-canvas"></canvas>
                    <span class="thumb-label"></span>
                  </div>

                  <div class="meta">
                    <p class="title">Conway Mutation and the Jones Unknot Problem</p>
                    <p class="blurb">A paper detailing that the Jones polynomial is invariant under Conway mutation, using bracket vector notation.</p>

                    <div class="meta-bottom">
                      <div class="tags">
                        <span class="tag">exposition</span>
                        <span class="tag">topology</span>
                        <span class="tag">tikz</span>
                        <span class="tag">technical</span>
                      </div>
                      <div class="linksrow">
                        <a href="https://gokovagt.org/proceedings/2011/ggt11-greene.pdf">reference ↗</a>
                      </div>
                    </div>
                  </div>

                  <details class="drop">
                    <summary class="drop-sum">
                      <span class="left">
                        <span class="chip">PDF</span>
                        <span>open paper</span>
                      </span>
                    </summary>
                    <div class="pdfwrap">
                      <iframe class="pdf" src="./pdfs/research-1-draft.pdf" title="Research 1 PDF"></iframe>
                      <div class="pdf-fallback">
                        If the embed doesn’t load, open it directly:
                        <a href="./pdfs/research-1-draft.pdf">research-1-draft.pdf ↗</a>
                      </div>
                    </div>
                  </details>
                </article>

                <!-- RESEARCH 3 -->
                <article class="proj">
                  <div class="thumb pdf-thumb" data-pdf="./pdfs/research-3-draft.pdf" aria-label="Research 3 preview">
                    <canvas class="thumb-canvas"></canvas>
                    <span class="thumb-label"></span>
                  </div>

                  <div class="meta">
                    <p class="title">Coupling Bounds for Glauber Colorings</p>
                    <p class="blurb">A clean comparison of classical/path coupling bounds for single site Glauber dynamics on $q$ colorings.</p>

                    <div class="meta-bottom">
                      <div class="tags">
                        <span class="tag">reproducibility</span>
                        <span class="tag">MCMC</span>
                        <span class="tag">python</span>
                        <span class="tag">C++</span>
                      </div>
                      <div class="linksrow">
                        <a href="https://meetings.ams.org/math/jmm2026/meetingapp.cgi/Paper/52479">publication ↗</a>
                      </div>
                    </div>
                  </div>

                  <details class="drop">
                    <summary class="drop-sum">
                      <span class="left">
                        <span class="chip">PDF</span>
                        <span>open paper</span>
                      </span>
                    </summary>
                    <div class="pdfwrap">
                      <iframe class="pdf" src="./pdfs/research-3-draft.pdf" title="Research 3 PDF"></iframe>
                      <div class="pdf-fallback">
                        If the embed doesn’t load, open it directly:
                        <a href="./pdfs/research-3-draft.pdf">research-3-poster.pdf ↗</a>
                      </div>
                    </div>
                  </details>
                </article>

                <!-- RESEARCH 5 -->
                <article class="proj">
                  <div class="thumb pdf-thumb" data-pdf="./pdfs/research-5-draft.pdf" aria-label="Research 3 preview">
                    <canvas class="thumb-canvas"></canvas>
                    <span class="thumb-label"></span>
                  </div>

                  <div class="meta">
                    <p class="title">Notes for Fourier Transform on $\mathbb{R}$</p>
                    <p class="blurb">A clean layout for a detailed proof providing a step-by-step derivation of the inversion for the Fourier transform.</p>

                    <div class="meta-bottom">
                      <div class="tags">
                        <span class="tag">presentation</span>
                        <span class="tag">latex</span>
                      </div>
                      <div class="linksrow">
                        <a href="https://www.math.ucla.edu/~tao/247a.1.06f/notes0.pdf">notes ↗</a>
                      </div>
                    </div>
                  </div>

                  <details class="drop">
                    <summary class="drop-sum">
                      <span class="left">
                        <span class="chip">PDF</span>
                        <span>open paper</span>
                      </span>
                    </summary>
                    <div class="pdfwrap">
                      <iframe class="pdf" src="./pdfs/research-5-draft.pdf" title="Research 3 PDF"></iframe>
                      <div class="pdf-fallback">
                        If the embed doesn’t load, open it directly:
                        <a href="./pdfs/research-5-draft.pdf">research-5-draft.pdf ↗</a>
                      </div>
                    </div>
                  </details>
                </article>

              </div>

              <!-- RIGHT STACK: 2 then 4 -->
              <div class="colstack">

                <!-- RESEARCH 2 -->
                <article class="proj">
                  <div class="thumb pdf-thumb" data-pdf="./pdfs/research-2-draft.pdf" aria-label="Research 2 preview">
                    <canvas class="thumb-canvas"></canvas>
                    <span class="thumb-label"></span>
                  </div>

                  <div class="meta">
                    <p class="title">Quantitatively Controlled Holomorphic Maps</p>
                    <p class="blurb">The paper provides a detailed, validated sequence of experimentations aimed at deriving a special annulus.</p>

                    <div class="meta-bottom">
                      <div class="tags">
                        <span class="tag">analysis</span>
                        <span class="tag">proof</span>
                        <span class="tag">latex</span>
                      </div>
                      <div class="linksrow">
                        <a href="https://www.math.ucla.edu/~tao/247a.1.06f/notes0.pdf">notes ↗</a>
                      </div>
                    </div>
                  </div>

                  <details class="drop">
                    <summary class="drop-sum">
                      <span class="left">
                        <span class="chip">PDF</span>
                        <span>open paper</span>
                      </span>
                    </summary>
                    <div class="pdfwrap">
                      <iframe class="pdf" src="./pdfs/research-2-draft.pdf" title="Research 2 PDF"></iframe>
                      <div class="pdf-fallback">
                        If the embed doesn’t load, open it directly:
                        <a href="./pdfs/research-2-draft.pdf">research-2-draft.pdf ↗</a>
                      </div>
                    </div>
                  </details>
                </article>

                <!-- RESEARCH 4 -->
                <article class="proj">
                  <div class="thumb pdf-thumb" data-pdf="./pdfs/research-4-draft.pdf" aria-label="Research 4 preview">
                    <canvas class="thumb-canvas"></canvas>
                    <span class="thumb-label"></span>
                  </div>

                  <div class="meta">
                    <p class="title">Random Euler-Product Surrogates</p>
                    <p class="blurb">Developing a strong statement, and proving small-surrogate cases on i.i.d random $\zeta$.</p>

                    <div class="meta-bottom">
                      <div class="tags">
                        <span class="tag">expository</span>
                        <span class="tag">notes</span>
                      </div>
                      <div class="linksrow">
                        <a href="#" aria-label="(placeholder)"></a>
                      </div>
                    </div>
                  </div>

                  <details class="drop">
                    <summary class="drop-sum">
                      <span class="left">
                        <span class="chip">PDF</span>
                        <span>open notes</span>
                      </span>
                    </summary>
                    <div class="pdfwrap">
                      <iframe class="pdf" src="./pdfs/research-4-draft.pdf" title="Research 4 PDF"></iframe>
                      <div class="pdf-fallback">
                        If the embed doesn’t load, open it directly:
                        <a href="./pdfs/research-4-draft.pdf">research-4-draft.pdf ↗</a>
                      </div>
                    </div>
                  </details>
                </article>

                <!-- RESEARCH 6 -->
                <article class="proj">
                  <div class="thumb pdf-thumb" data-pdf="./pdfs/research-6-draft.pdf" aria-label="Research 4 preview">
                    <canvas class="thumb-canvas"></canvas>
                    <span class="thumb-label"></span>
                  </div>

                  <div class="meta">
                    <p class="title">Feature-Extraction Machine Learning</p>
                    <p class="blurb">Developed, innovated, and implemented a new way to conduct first-round application holistic reviews.</p>

                    <div class="meta-bottom">
                      <div class="tags">
                        <span class="tag">demonstration</span>
                        <span class="tag">innovation</span>
                      </div>
                      <div class="linksrow">
                        <a href="https://www.mathworks.com/discovery/feature-extraction.html" aria-label="link">learn more ↗</a>
                      </div>
                    </div>
                  </div>

                  <details class="drop">
                    <summary class="drop-sum">
                      <span class="left">
                        <span class="chip">PDF</span>
                        <span>open notes</span>
                      </span>
                    </summary>
                    <div class="pdfwrap">
                      <iframe class="pdf" src="./pdfs/research-6-draft.pdf" title="Research 6 PDF"></iframe>
                      <div class="pdf-fallback">
                        If the embed doesn’t load, open it directly:
                        <a href="./pdfs/research-6-draft.pdf">research-6-draft.pdf ↗</a>
                      </div>
                    </div>
                  </details>
                </article>
              </div>

            </div>
          </div>
        </div>
      </section>

      <!-- RIGHT RAIL -->
      <aside>
        <div class="bubble">
          <div class="portrait viz">
            <iframe src="./zeta_terrain.html" title="Zeta Terrain" loading="lazy"></iframe>
          </div>
          <p class="mini">
            <b>3D Riemann Zeta Surface</b> A surface plot visualizing the phase $\arg\zeta(s)$ over $s=\sigma+it$ ($s\in \mathbb{C}$).
          </p>
        </div>

        <div class="bubble">
          <h3>site</h3>
          <a href="../">home ↩</a>
          <a href="../experience/">experience →</a>
          <a href="../media/">media →</a>
          <a href="../contact/">contact →</a>
        </div>

        <div class="bubble">
          <h3>links</h3>
          <a href="./resume.pdf" target="_blank" rel="noopener">resume ↗</a>
          <a href="https://scholar.google.com/citations?user=NpI6y3gAAAAJ&hl=en" target="_blank" rel="noreferrer">google scholar ↗</a>
          <a href="https://arxiv.org/user/" target="_blank" rel="noreferrer">arxiv ↗</a>
        </div>
      </aside>

    </div>

    <footer>© 2025 Iz Tecúm</footer>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // PDF.js worker
      pdfjsLib.GlobalWorkerOptions.workerSrc =
        "https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.worker.min.js";

      async function renderThumb(el){
        const url = el.dataset.pdf;
        if(!url) return;

        const canvas = document.createElement("canvas");
        canvas.className = "thumb-canvas";
        el.innerHTML = "";
        el.appendChild(canvas);

        const pdf = await pdfjsLib.getDocument(url).promise;
        const page = await pdf.getPage(1);

        const viewport = page.getViewport({ scale: 1.5 });
        const ctx = canvas.getContext("2d", { alpha:false });

        canvas.width = Math.floor(viewport.width);
        canvas.height = Math.floor(viewport.height);

        await page.render({ canvasContext: ctx, viewport }).promise;
      }

      document.querySelectorAll(".pdf-thumb").forEach(renderThumb);

      // Hamburger nav toggle (mobile)
      const topbar = document.querySelector(".topbar");
      const btn = document.querySelector(".nav-toggle");
      const nav = document.querySelector(".topnav");

      if (btn && topbar && nav) {
        const setOpen = (open) => {
          topbar.classList.toggle("nav-open", open);
          btn.setAttribute("aria-expanded", open ? "true" : "false");
        };

        btn.addEventListener("click", (e) => {
          e.stopPropagation();
          setOpen(!topbar.classList.contains("nav-open"));
        });

        // close when clicking outside
        document.addEventListener("click", (e) => {
          if (!topbar.contains(e.target)) setOpen(false);
        });

        // close on Escape
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape") setOpen(false);
        });

        // close after tapping a link
        nav.querySelectorAll("a").forEach(a => {
          a.addEventListener("click", () => setOpen(false));
        });
      }

      // KaTeX autorender (requires katex + auto-render scripts in <head>)
      if (window.renderMathInElement) {
        renderMathInElement(document.body, {
          delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false},
            {left: "\\(", right: "\\)", display: false},
            {left: "\\[", right: "\\]", display: true}
          ],
          throwOnError: false
        });
      }
    });
  </script>

</body>
</html>
